<%inherit file="page_structure.html"/>

<%block name="title">
    <title>Навигатор ${session_context["company"]}</title>
    <link href="/static/css/dashboard.css" rel="stylesheet">

</%block>

    <div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">
        <h1 class="page-header"> Навигатор</h1>


                        <%def name="template_return_childs(session,parent)">
                        <%
                            string = "<li class=\"list-group-item\">"
                            childs = obj.ktree_return_childs(session,parent)

                            if len(childs) != 1:
                                string += "<a href='/ktree/%s'>%s</a>  "%(str(childs[0].uuid),childs[0].name)
                                string += "<a href='/ktree/add?parent_id=%s&name=%s'>"%(childs[0].id,childs[0].name)
                                string += "<span class='glyphicon glyphicon-plus'></span></a></li>\n<ul>"
                                for child in childs[1:]:
                                    s = template_return_childs(session,child.id)
                                    string = string + s
                                string = string + "</ul>\n"
                            elif len(childs) == 1:
                                string += "<a href='/ktree/%s'>%s</a>  "%(str(childs[0].uuid),childs[0].name)
                                string += "<a href='/ktree/add?parent_id=%s&name=%s'>"%(childs[0].id,childs[0].name)
                                string += "<span class='glyphicon glyphicon-plus'></span></a></li>\n"
                                return string
                            else:
                                pass

                            return string
                        %>
                        </%def>

                        <ul class="list-group">
                            <% root = obj.get_root(session) %>
                          ${template_return_childs(session,root)}
                        </ul>


    </div>
